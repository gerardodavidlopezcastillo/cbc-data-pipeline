{
  "version": 4,
  "terraform_version": "1.14.3",
  "serial": 51,
  "lineage": "9f9b217f-6bf5-b0da-ce6b-6d1e7e2b661d",
  "outputs": {
    "ecr_repository_arn": {
      "value": "arn:aws:ecr:us-east-1:508186271604:repository/cbc-data-pipeline",
      "type": "string"
    },
    "ecr_repository_url": {
      "value": "508186271604.dkr.ecr.us-east-1.amazonaws.com/cbc-data-pipeline",
      "type": "string"
    },
    "ecs_cluster_name": {
      "value": "cbcmobility-cluster",
      "type": "string"
    },
    "ecs_service_name": {
      "value": "cbcmobility-service",
      "type": "string"
    },
    "ecs_task_definition_arn": {
      "value": "arn:aws:ecs:us-east-1:508186271604:task-definition/cbcmobility-task:4",
      "type": "string"
    },
    "lambda_role_arn": {
      "value": "arn:aws:iam::508186271604:role/cbcmobility-LambdaExecutionRole",
      "type": "string"
    },
    "processed_bucket_name": {
      "value": "cbc-datalake-silver",
      "type": "string"
    },
    "raw_bucket_name": {
      "value": "cbc-datalake-bronze",
      "type": "string"
    },
    "redshift_cluster_endpoint": {
      "value": "cbcmobility-cluster.cjhg4n6uhy89.us-east-1.redshift.amazonaws.com:5439",
      "type": "string"
    },
    "redshift_role_arn": {
      "value": "arn:aws:iam::508186271604:role/cbcmobility-RedshiftRole",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "cbc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:508186271604:log-group:/ecs/cbcmobility",
            "id": "/ecs/cbcmobility",
            "kms_key_id": "",
            "name": "/ecs/cbcmobility",
            "name_prefix": "",
            "retention_in_days": 7,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecr_repository",
      "name": "cbc_data_pipeline",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecr:us-east-1:508186271604:repository/cbc-data-pipeline",
            "encryption_configuration": [
              {
                "encryption_type": "AES256",
                "kms_key": ""
              }
            ],
            "force_delete": null,
            "id": "cbc-data-pipeline",
            "image_scanning_configuration": [
              {
                "scan_on_push": true
              }
            ],
            "image_tag_mutability": "MUTABLE",
            "name": "cbc-data-pipeline",
            "registry_id": "508186271604",
            "repository_url": "508186271604.dkr.ecr.us-east-1.amazonaws.com/cbc-data-pipeline",
            "tags": {
              "Environment": "dev",
              "Project": "cbc-data-pipeline"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "cbc-data-pipeline"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "cbc_cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:us-east-1:508186271604:cluster/cbcmobility-cluster",
            "capacity_providers": [],
            "configuration": [],
            "default_capacity_provider_strategy": [],
            "id": "arn:aws:ecs:us-east-1:508186271604:cluster/cbcmobility-cluster",
            "name": "cbcmobility-cluster",
            "service_connect_defaults": [],
            "setting": [
              {
                "name": "containerInsights",
                "value": "disabled"
              }
            ],
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "cbc_service",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alarms": [],
            "capacity_provider_strategy": [],
            "cluster": "arn:aws:ecs:us-east-1:508186271604:cluster/cbcmobility-cluster",
            "deployment_circuit_breaker": [
              {
                "enable": false,
                "rollback": false
              }
            ],
            "deployment_controller": [
              {
                "type": "ECS"
              }
            ],
            "deployment_maximum_percent": 200,
            "deployment_minimum_healthy_percent": 100,
            "desired_count": 0,
            "enable_ecs_managed_tags": false,
            "enable_execute_command": false,
            "force_new_deployment": null,
            "health_check_grace_period_seconds": 0,
            "iam_role": "/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS",
            "id": "arn:aws:ecs:us-east-1:508186271604:service/cbcmobility-cluster/cbcmobility-service",
            "launch_type": "FARGATE",
            "load_balancer": [],
            "name": "cbcmobility-service",
            "network_configuration": [
              {
                "assign_public_ip": true,
                "security_groups": [
                  "sg-05f6903584b955e85"
                ],
                "subnets": [
                  "subnet-0eaffef0f194c1de9"
                ]
              }
            ],
            "ordered_placement_strategy": [],
            "placement_constraints": [],
            "platform_version": "LATEST",
            "propagate_tags": "NONE",
            "scheduling_strategy": "REPLICA",
            "service_connect_configuration": [],
            "service_registries": [],
            "tags": {},
            "tags_all": {},
            "task_definition": "arn:aws:ecs:us-east-1:508186271604:task-definition/cbcmobility-task:4",
            "timeouts": null,
            "triggers": {},
            "wait_for_steady_state": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_cloudwatch_log_group.cbc",
            "aws_ecr_repository.cbc_data_pipeline",
            "aws_ecs_cluster.cbc_cluster",
            "aws_ecs_task_definition.cbc_task",
            "aws_iam_policy_attachment.ecs_task_execution_policy",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "cbc_task",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:us-east-1:508186271604:task-definition/cbcmobility-task:4",
            "arn_without_revision": "arn:aws:ecs:us-east-1:508186271604:task-definition/cbcmobility-task",
            "container_definitions": "[{\"cpu\":512,\"environment\":[],\"essential\":true,\"image\":\"508186271604.dkr.ecr.us-east-1.amazonaws.com/cbc-data-pipeline:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/cbcmobility\",\"awslogs-region\":\"us-east-1\",\"awslogs-stream-prefix\":\"ecs\"}},\"memory\":1024,\"mountPoints\":[],\"name\":\"cbcmobility-container\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]",
            "cpu": "512",
            "ephemeral_storage": [],
            "execution_role_arn": "arn:aws:iam::508186271604:role/cbcmobility-ECSTaskExecutionRole",
            "family": "cbcmobility-task",
            "id": "cbcmobility-task",
            "inference_accelerator": [],
            "ipc_mode": "",
            "memory": "1024",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "requires_compatibilities": [
              "FARGATE"
            ],
            "revision": 4,
            "runtime_platform": [],
            "skip_destroy": false,
            "tags": {},
            "tags_all": {},
            "task_role_arn": "arn:aws:iam::508186271604:role/cbcmobility-ECSTaskRole",
            "volume": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_cloudwatch_log_group.cbc",
            "aws_ecr_repository.cbc_data_pipeline",
            "aws_iam_role.ecs_task_execution_role",
            "aws_iam_role.ecs_task_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_glue_catalog_database",
      "name": "cbcmobility",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:glue:us-east-1:508186271604:database/cbcmobility",
            "catalog_id": "508186271604",
            "create_table_default_permission": [
              {
                "permissions": [
                  "ALL"
                ],
                "principal": [
                  {
                    "data_lake_principal_identifier": "IAM_ALLOWED_PRINCIPALS"
                  }
                ]
              }
            ],
            "description": "Glue database for CBC Mobility datasets",
            "id": "508186271604:cbcmobility",
            "location_uri": "",
            "name": "cbcmobility",
            "parameters": {},
            "tags": {},
            "tags_all": {},
            "target_database": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_glue_catalog_table",
      "name": "st_cbc_test",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:glue:us-east-1:508186271604:table/cbcmobility/st_cbc_test",
            "catalog_id": "508186271604",
            "database_name": "cbcmobility",
            "description": "",
            "id": "508186271604:cbcmobility:st_cbc_test",
            "name": "st_cbc_test",
            "owner": "",
            "parameters": {
              "EXTERNAL": "TRUE",
              "classification": "parquet"
            },
            "partition_index": [],
            "partition_keys": [
              {
                "comment": "",
                "name": "fecha_particion",
                "type": "bigint"
              }
            ],
            "retention": 0,
            "storage_descriptor": [
              {
                "bucket_columns": [],
                "columns": [
                  {
                    "comment": "",
                    "name": "desc_fuente",
                    "parameters": {},
                    "type": "string"
                  },
                  {
                    "comment": "",
                    "name": "desc_nombre_archivo",
                    "parameters": {},
                    "type": "string"
                  },
                  {
                    "comment": "",
                    "name": "dtm_fecha_carga",
                    "parameters": {},
                    "type": "timestamp"
                  },
                  {
                    "comment": "",
                    "name": "desc_pais",
                    "parameters": {},
                    "type": "string"
                  },
                  {
                    "comment": "",
                    "name": "id_transporte",
                    "parameters": {},
                    "type": "int"
                  },
                  {
                    "comment": "",
                    "name": "id_ruta",
                    "parameters": {},
                    "type": "int"
                  },
                  {
                    "comment": "",
                    "name": "cod_sku_material",
                    "parameters": {},
                    "type": "string"
                  },
                  {
                    "comment": "",
                    "name": "desc_unidad",
                    "parameters": {},
                    "type": "string"
                  },
                  {
                    "comment": "",
                    "name": "num_unidades",
                    "parameters": {},
                    "type": "int"
                  },
                  {
                    "comment": "",
                    "name": "cantidad",
                    "parameters": {},
                    "type": "double"
                  },
                  {
                    "comment": "",
                    "name": "cantidad_unidades_totales",
                    "parameters": {},
                    "type": "double"
                  },
                  {
                    "comment": "",
                    "name": "vlr_precio",
                    "parameters": {},
                    "type": "double"
                  },
                  {
                    "comment": "",
                    "name": "desc_tipo_entrega",
                    "parameters": {},
                    "type": "string"
                  },
                  {
                    "comment": "",
                    "name": "es_entrega_rutina",
                    "parameters": {},
                    "type": "int"
                  },
                  {
                    "comment": "",
                    "name": "es_entrega_bonificacion",
                    "parameters": {},
                    "type": "int"
                  }
                ],
                "compressed": false,
                "input_format": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
                "location": "s3://cbc-datalake-silver/mobility/processed/",
                "number_of_buckets": 0,
                "output_format": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
                "parameters": {},
                "schema_reference": [],
                "ser_de_info": [
                  {
                    "name": "",
                    "parameters": {},
                    "serialization_library": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe"
                  }
                ],
                "skewed_info": [],
                "sort_columns": [],
                "stored_as_sub_directories": false
              }
            ],
            "table_type": "EXTERNAL_TABLE",
            "target_table": [],
            "view_expanded_text": "",
            "view_original_text": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_glue_catalog_database.cbcmobility"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "ecs_s3_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::508186271604:policy/cbcmobility-ECSS3Access",
            "description": "Allow ECS task to access S3 buckets",
            "id": "arn:aws:iam::508186271604:policy/cbcmobility-ECSS3Access",
            "name": "cbcmobility-ECSS3Access",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::cbc-datalake-bronze\",\"arn:aws:s3:::cbc-datalake-bronze/*\",\"arn:aws:s3:::cbc-datalake-silver\",\"arn:aws:s3:::cbc-datalake-silver/*\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAXMUSDD52KTILYBUKS",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy_attachment",
      "name": "ecs_task_execution_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "groups": [],
            "id": "cbcmobility-ECSTaskExecutionPolicy",
            "name": "cbcmobility-ECSTaskExecutionPolicy",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "roles": [
              "cbcmobility-ECSTaskExecutionRole"
            ],
            "users": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.ecs_task_execution_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy_attachment",
      "name": "lambda_basic_execution",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "groups": [],
            "id": "cbcmobility-LambdaBasicExecutionRole",
            "name": "cbcmobility-LambdaBasicExecutionRole",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
            "roles": [
              "cbcmobility-LambdaExecutionRole"
            ],
            "users": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy_attachment",
      "name": "lambda_redshift_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "groups": [],
            "id": "cbcmobility-LambdaRedshiftDataAccess",
            "name": "cbcmobility-LambdaRedshiftDataAccess",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonRedshiftDataFullAccess",
            "roles": [
              "cbcmobility-LambdaExecutionRole"
            ],
            "users": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy_attachment",
      "name": "redshift_s3_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "groups": [],
            "id": "cbcmobility-RedshiftS3FullAccess",
            "name": "cbcmobility-RedshiftS3FullAccess",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonS3FullAccess",
            "roles": [
              "cbcmobility-RedshiftRole"
            ],
            "users": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.redshift_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::508186271604:role/cbcmobility-ECSTaskExecutionRole",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2026-01-13T16:10:09Z",
            "description": "",
            "force_detach_policies": false,
            "id": "cbcmobility-ECSTaskExecutionRole",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::508186271604:policy/cbcmobility-ECSTaskS3GluePolicy",
              "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
            ],
            "max_session_duration": 3600,
            "name": "cbcmobility-ECSTaskExecutionRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "2026-01-13T23:50:59Z",
                "region": "us-east-1"
              }
            ],
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAXMUSDD52H5B65FSAW"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::508186271604:role/cbcmobility-ECSTaskRole",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2026-01-13T23:44:01Z",
            "description": "",
            "force_detach_policies": false,
            "id": "cbcmobility-ECSTaskRole",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::508186271604:policy/cbcmobility-ECSS3Access"
            ],
            "max_session_duration": 3600,
            "name": "cbcmobility-ECSTaskRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "",
                "region": ""
              }
            ],
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAXMUSDD52L7KZGJCY4"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::508186271604:role/cbcmobility-LambdaExecutionRole",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2026-01-13T00:04:25Z",
            "description": "",
            "force_detach_policies": false,
            "id": "cbcmobility-LambdaExecutionRole",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/AmazonRedshiftDataFullAccess",
              "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
            ],
            "max_session_duration": 3600,
            "name": "cbcmobility-LambdaExecutionRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "",
                "region": ""
              }
            ],
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAXMUSDD52GPDGEURXM"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "redshift_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::508186271604:role/cbcmobility-RedshiftRole",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"redshift.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2026-01-13T00:04:25Z",
            "description": "",
            "force_detach_policies": false,
            "id": "cbcmobility-RedshiftRole",
            "inline_policy": [
              {
                "name": "terraform-20260113062447690200000001",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::cbc-datalake-bronze\",\"arn:aws:s3:::cbc-datalake-bronze/*\",\"arn:aws:s3:::cbc-datalake-silver\",\"arn:aws:s3:::cbc-datalake-silver/*\"]},{\"Action\":[\"glue:GetDatabase\",\"glue:GetDatabases\",\"glue:GetTable\",\"glue:GetTables\",\"glue:GetPartition\",\"glue:GetPartitions\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/AmazonS3FullAccess"
            ],
            "max_session_duration": 3600,
            "name": "cbcmobility-RedshiftRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "",
                "region": ""
              }
            ],
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAXMUSDD52MSADSGNFV"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "redshift_spectrum_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cbcmobility-RedshiftRole:terraform-20260113062447690200000001",
            "name": "terraform-20260113062447690200000001",
            "name_prefix": null,
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::cbc-datalake-bronze\",\"arn:aws:s3:::cbc-datalake-bronze/*\",\"arn:aws:s3:::cbc-datalake-silver\",\"arn:aws:s3:::cbc-datalake-silver/*\"]},{\"Action\":[\"glue:GetDatabase\",\"glue:GetDatabases\",\"glue:GetTable\",\"glue:GetTables\",\"glue:GetPartition\",\"glue:GetPartitions\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "cbcmobility-RedshiftRole"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.redshift_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_task_s3_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cbcmobility-ECSTaskRole-20260113234401856800000001",
            "policy_arn": "arn:aws:iam::508186271604:policy/cbcmobility-ECSS3Access",
            "role": "cbcmobility-ECSTaskRole"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_policy.ecs_s3_policy",
            "aws_iam_role.ecs_task_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_redshift_cluster",
      "name": "cbcmobility_cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allow_version_upgrade": true,
            "apply_immediately": false,
            "aqua_configuration_status": "auto",
            "arn": "arn:aws:redshift:us-east-1:508186271604:cluster:cbcmobility-cluster",
            "automated_snapshot_retention_period": 1,
            "availability_zone": "us-east-1a",
            "availability_zone_relocation_enabled": false,
            "cluster_identifier": "cbcmobility-cluster",
            "cluster_nodes": [],
            "cluster_parameter_group_name": "default.redshift-2.0",
            "cluster_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCk0LTd+1fRWV/K4SiU66LglUpSQTZz2UA9X0E4b5+ktgIm34/i1NtVKnsXpYoDYfVpgiv7KmvMQB3nQzi7VheR3oOeUhj09OJ3FVflNRY3k3PP432zMIqD1HPnWzuRW9QIAqg4/V9Yv7RgzFvN/M9jBLIhgJOtbQbYB9jJ/C9BnEBO9mKSR/rGdstp/9LBeKVbsFfGP2xJ13bN9hPAq/hlo7hS97wePceSgGhc77oSRL13BbHfJdlRMqpiWfawaGx3CnWgGS9QE5rwXVH2MN3JmjzbrNtCWOqKhC8luHmywn6FbhEIDIlYr/Jf2HmWl65HJf8uYSjC2/CHoWP8q27J Amazon-Redshift\n",
            "cluster_revision_number": "179517",
            "cluster_security_groups": [],
            "cluster_subnet_group_name": "cbcmobility-subnet-group",
            "cluster_type": "single-node",
            "cluster_version": "1.0",
            "database_name": "cbcmobility_db",
            "default_iam_role_arn": "",
            "dns_name": "cbcmobility-cluster.cjhg4n6uhy89.us-east-1.redshift.amazonaws.com",
            "elastic_ip": null,
            "encrypted": false,
            "endpoint": "cbcmobility-cluster.cjhg4n6uhy89.us-east-1.redshift.amazonaws.com:5439",
            "enhanced_vpc_routing": false,
            "final_snapshot_identifier": null,
            "iam_roles": [
              "arn:aws:iam::508186271604:role/cbcmobility-RedshiftRole"
            ],
            "id": "cbcmobility-cluster",
            "kms_key_id": "",
            "logging": [
              {
                "bucket_name": "",
                "enable": false,
                "log_destination_type": "",
                "log_exports": [],
                "s3_key_prefix": ""
              }
            ],
            "maintenance_track_name": "current",
            "manual_snapshot_retention_period": -1,
            "master_password": "Cbcmobility123!_+",
            "master_username": "adminuser",
            "node_type": "ra3.large",
            "number_of_nodes": 1,
            "owner_account": null,
            "port": 5439,
            "preferred_maintenance_window": "thu:08:00-thu:08:30",
            "publicly_accessible": true,
            "skip_final_snapshot": false,
            "snapshot_cluster_identifier": null,
            "snapshot_copy": [],
            "snapshot_identifier": null,
            "tags": {
              "Environment": "dev",
              "Name": "cbcmobility-redshift-cluster"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "cbcmobility-redshift-cluster"
            },
            "timeouts": null,
            "vpc_security_group_ids": [
              "sg-05f6903584b955e85"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "master_password"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo0NTAwMDAwMDAwMDAwLCJkZWxldGUiOjI0MDAwMDAwMDAwMDAsInVwZGF0ZSI6NDUwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.redshift_role",
            "aws_redshift_subnet_group.cbcmobility_subnet_group"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_redshift_subnet_group",
      "name": "cbcmobility_subnet_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:redshift:us-east-1:508186271604:subnetgroup:cbcmobility-subnet-group",
            "description": "Subnet group for CBC Mobility Redshift cluster",
            "id": "cbcmobility-subnet-group",
            "name": "cbcmobility-subnet-group",
            "subnet_ids": [
              "subnet-00c52eee0b5226053",
              "subnet-0eaffef0f194c1de9"
            ],
            "tags": {
              "Environment": "dev",
              "Name": "cbcmobility-redshift-subnet-group"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "cbcmobility-redshift-subnet-group"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "athena_results",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::cbc-athena-results",
            "bucket": "cbc-athena-results",
            "bucket_domain_name": "cbc-athena-results.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "cbc-athena-results.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "30677a8fe6f517b10096e392d53ab23dc0eb251493a41d6bc819695fff651e96",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "cbc-athena-results",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "cbcmobility-athena-results"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "cbcmobility-athena-results"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "processed_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::cbc-datalake-silver",
            "bucket": "cbc-datalake-silver",
            "bucket_domain_name": "cbc-datalake-silver.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "cbc-datalake-silver.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "30677a8fe6f517b10096e392d53ab23dc0eb251493a41d6bc819695fff651e96",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "cbc-datalake-silver",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "cbcmobility-processed-data"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "cbcmobility-processed-data"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "raw_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::cbc-datalake-bronze",
            "bucket": "cbc-datalake-bronze",
            "bucket_domain_name": "cbc-datalake-bronze.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "cbc-datalake-bronze.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "30677a8fe6f517b10096e392d53ab23dc0eb251493a41d6bc819695fff651e96",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "cbc-datalake-bronze",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "cbcmobility-raw-data"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "cbcmobility-raw-data"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    }
  ],
  "check_results": null
}
